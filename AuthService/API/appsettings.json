{
  "ConnectionStrings": {
    "DefaultConnection": "Host=172.16.211.21;Port=5432;Database=AuthServiceDB;Username=pokamestov;Password=test123"
  },
  "DataProtection": {
    "OtpSecretEncryptionKey": "VXu1E6e1VL6R5c9VsfK05o9fVeOEKx3sr6LUu/SC9X4=" //byte[32]
  },
  "Features": {
    "RefreshTokenStorage": {
      "Provider": "PostgreSQL",
      "Enabled": true
    }
  },
  "Tarantool": {
    "Enabled": false,
    "Host": "172.16.211.18",
    "Port": 3301,
    "Username": "admin",
    "Password": "secret",
    "TokensSpace": "refresh_tokens",
    "ConnectionTimeoutMs": 5000,
    "RetryCount": 3
  },
  "Cache": {
    "UserCacheEnabled": true,
    "UserCacheTtlSeconds": 21600, // 360 минут (6 часов)
    "LoginRateLimitingEnabled": true,
    "LoginRateLimitMaxAttempts": 5,
    "LoginRateLimitWindowSeconds": 300, // 5 минут
    "LoginRateLimitBlockDurationSeconds": 900 // 15 минут
  },
  "BackgroundServices": {
    "RefreshTokenCleanup": {
      "Enabled": true,
      "CleanupIntervalHours": 24,
      "DaysToKeep": 5,
      "BatchSize": 1000,
      "MaxRetentionDays": 90
    }
  },
  "JwtSettings": {
    "SecretKey": "ОченьДлинныйСекретныйКлючДляПодписиJWT_НеМенее32Символов!!!",
    "Issuer": "AuthService",
    "Audience": "AuthServiceClients",
    "AccessTokenExpirationMinutes": "180",
    "RefreshTokenExpirationDays": "30",
    "RefreshTokenGracePeriodSeconds": 15
  },
  "RabbitMQ": {
    "HostName": "172.16.211.18",
    "UserName": "admin",
    "Password": "admin",
    "VirtualHost": "termidesk",
    "Port": 5672,
    "ExchangeName": "authservice.events",
    "ExchangeType": "topic"
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/log-.txt",
          "rollingInterval": "Day",
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {Message:lj} {NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
  },
  "TestSettings": {
    "MySecretValue": "ThisIsAValueFromAppSettings"
  },
  "Sentry": {
    "Dsn": "https://73ba5d91a3a0a89aa0674a2ed5ac203b@sentry.pit.protei.ru/2",
    "SendDefaultPii": true,
    "MaxRequestBodySize": "Always",
    "MinimumBreadcrumbLevel": "Debug",
    "MinimumEventLevel": "Warning",
    "AttachStackTrace": true,
    "Debug": true,
    "DiagnosticLevel": "Error"
  },
  "Cors": {
    "AllowAnyOrigin": true,
    "AllowedOrigins": [],
    "AllowAnyMethod": true,
    "AllowAnyHeader": true
  },
  "ServiceDiscovery": {
    "ServiceName": "auth-service",
    "ServiceAddress": "172.16.211.21",
    "ServicePort": 5026,
    "HealthCheckPath": "/health"
  },
  "Eureka": {
    "Enabled": false,
    "ServerUrl": "http://localhost:8761/eureka",
    "RequestTimeoutSeconds": 10,
    "HeartbeatIntervalSeconds": 30,
    "AutoRegister": true,
    "AutoDeregister": true
  },
  "AllowedHosts": "*"
}
